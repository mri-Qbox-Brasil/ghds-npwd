(()=>{var ct=Object.create;var ne=Object.defineProperty;var ut=Object.getOwnPropertyDescriptor;var Tt=Object.getOwnPropertyNames,he=Object.getOwnPropertySymbols,At=Object.getPrototypeOf,Oe=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable;var Pe=(e,t,n)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,re=(e,t)=>{for(var n in t||(t={}))Oe.call(t,n)&&Pe(e,n,t[n]);if(he)for(var n of he(t))gt.call(t,n)&&Pe(e,n,t[n]);return e};var a=(e,t)=>()=>(e&&(t=e(e=0)),t);var ie=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ct=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of Tt(t))!Oe.call(e,l)&&l!==n&&ne(e,l,{get:()=>t[l],enumerable:!(i=ut(t,l))||i.enumerable});return e};var oe=(e,t,n)=>(n=e!=null?ct(At(e)):{},Ct(t||!e||!e.__esModule?ne(n,"default",{value:e,enumerable:!0}):n,e));var o=(e,t,n)=>new Promise((i,l)=>{var T=S=>{try{A(n.next(S))}catch(y){l(y)}},I=S=>{try{A(n.throw(S))}catch(y){l(y)}},A=S=>S.done?i(S.value):Promise.resolve(S.value).then(T,I);A((n=n.apply(e,t)).next())});var h,De,x=a(()=>{h=e=>new Promise(t=>setTimeout(t,e)),De=()=>{let e="";for(let t=0;t<32;t+=1)switch(t){case 8:case 20:e+="-",e+=(Math.random()*16|0).toString(16);break;case 12:e+="-",e+="4";break;case 16:e+="-",e+=(Math.random()*4|8).toString(16);break;default:e+=(Math.random()*16|0).toString(16)}return e}});var M,p,_t,r,g,d=a(()=>{x();F();M=class{constructor(t){this._defaultSettings={promiseTimeout:15e3};this.setSettings(t)}setSettings(t){this._settings=re(re({},this._defaultSettings),t)}emitNetPromise(t,...n){return new Promise((i,l)=>{let T=!1;setTimeout(()=>{T=!0,l(`${t} has timed out after ${this._settings.promiseTimeout} ms`)},this._settings.promiseTimeout);let I=De(),A=`${t}:${I}`;emitNet(t,A,...n);let S=y=>{removeEventListener(A,S),!T&&i(y)};onNet(A,S)})}},p=(e,t)=>{RegisterNuiCallbackType(e),on(`__cfx_nui:${e}`,t)},_t=()=>new Promise(e=>{let t=setInterval(()=>{global.isPlayerLoaded&&e(t)},50)}).then(e=>clearInterval(e)),r=e=>{RegisterNuiCallbackType(e),on(`__cfx_nui:${e}`,(t,n)=>o(void 0,null,function*(){global.isPlayerLoaded||(yield _t());try{let i=yield P.emitNetPromise(e,t);n(i)}catch(i){console.error("Error encountered while listening to resp. Error:",i),n({status:"error"})}}))},g=(e,t,n)=>{let i=typeof t;if(!n.includes(i))throw new Error(`Export ${e} was called with incorrect argument type (${n.join(", ")}. Passed: ${t}, Type: ${i})`)}});function ae(e){return e&&typeof e=="object"&&!Array.isArray(e)}function W(e,...t){if(!t.length)return e;let n=t.shift();if(ae(e)&&ae(n))for(let i in n)ae(n[i])?(e[i]||Object.assign(e,{[i]:{}}),W(e[i],n[i])):Object.assign(e,{[i]:n[i]});return W(e,...t)}var be=a(()=>{});var Le,Re=a(()=>{Le={PhoneAsItem:{enabled:!1,exportResource:"my-core-resource",exportFunction:"myCheckerFunction"},customPhoneNumber:{enabled:!1,exportResource:"number-generator-resource",exportFunction:"generateNumber"},general:{useResourceIntegration:!1,toggleKey:"k",toggleCommand:"phone",defaultLanguage:"ptbr",showId:!1},contacts:{frameworkPay:!1,payResource:"my-core-resource",payFunction:"myCheckerFunction"},database:{useIdentifierPrefix:!1,playerTable:"users",identifierColumn:"identifier",identifierType:"license",profileQueries:!0,phoneNumberColumn:"phone_number"},images:{url:"https://api.fivemanage.com/api/image",type:"image",imageEncoding:"webp",contentType:"multipart/form-data",useContentType:!1,authorizationHeader:"Authorization",authorizationPrefix:"",useAuthorization:!0,returnedDataIndexes:["url"]},imageSafety:{filterUnsafeImageUrls:!0,embedUnsafeImages:!1,embedUrl:"https://i.example.com/embed",safeImageUrls:["i.imgur.com","i.file.glass","dropbox.com","c.tenor.com","discord.com","cdn.discordapp.com","media.discordapp.com","media.discordapp.net","upload.wikipedia.org","i.projecterror.dev","upcdn.io","i.fivemanage.com","api.fivemanage.com","r2.fivemanage.com","mriqbox.com.br"]},profanityFilter:{enabled:!1,badWords:["esx","vrp"]},twitter:{showNotifications:!0,generateProfileNameFromUsers:!0,allowEditableProfileName:!0,allowDeleteTweets:!0,allowReportTweets:!0,allowRetweet:!0,characterLimit:160,newLineLimit:10,enableAvatars:!0,enableEmojis:!0,enableImages:!0,maxImages:1,resultsLimit:25},match:{generateProfileNameFromUsers:!0,allowEditableProfileName:!0},marketplace:{persistListings:!1},browser:{homepageUrl:"https://mriqbox.com.br"},debug:{level:"error",enabled:!0,sentryEnabled:!0},defaultContacts:[],disabledApps:[],apps:[],voiceMessage:{enabled:!0,authorizationHeader:"Authorization",url:"https://api.fivemange/api/audio",returnedDataIndexes:["url"]},lockscreen:{carrier:"MRI"},store:{essentialApps:["DIALER","CONTACTS","MESSAGES","SETTINGS","STORE","CALCULATOR","BROWSER","NOTES","CAMERA","BANK","MAIL"],preInstalledApps:["WEATHER"]}}});var f,se=a(()=>{be();Re();f=(()=>{let e=GetCurrentResourceName(),t=JSON.parse(LoadResourceFile(e,"config.json")),n=GetConvar("npwd:phoneAsItem","");return n!==""&&(n=JSON.parse(n),Object.entries(t.PhoneAsItem).forEach(([i,l])=>{n[i]&&typeof l==typeof n[i]&&(t.PhoneAsItem[i]=n[i])})),W({},Le,t)})()});var O,we=a(()=>{O={TWITTER:"TWITTER",MATCH:"MATCH",MESSAGES:"MESSAGES",NOTES:"NOTES",MARKETPLACE:"MARKETPLACE",CONTACTS:"CONTACTS",CAMERA:"CAMERA",PHONE:"PHONE"}});function s(e,t,n){return SendNUIMessage({app:e,method:t,data:n})}function K(e,t={}){return s(O.TWITTER,e,t)}function V(e,t={}){return s(O.MESSAGES,e,t)}function ye(e,t={}){return s(O.NOTES,e,t)}function le(e,t={}){s(O.MARKETPLACE,e,t)}function Y(e,t={}){s(O.CONTACTS,e,t)}function xe(e,t={}){s(O.CAMERA,e,t)}function pe(e,t={}){return s(O.MATCH,e,t)}function Me(e,t={}){return s(O.PHONE,e,t)}var _=a(()=>{we()});var $=a(()=>{});var v=a(()=>{});var de,ft,C,H=a(()=>{de=class{setKvp(t,n){SetResourceKvp(t,n)}setKvpFloat(t,n){SetResourceKvpFloat(t,n)}setKvpInt(t,n){SetResourceKvpInt(t,n)}getKvpString(t){return GetResourceKvpString(t)}getKvpInt(t){return GetResourceKvpInt(t)}getKvpFloat(t){return GetResourceKvpFloat(t)}},ft=new de,C=ft});function G(){global.phoneProp!=0&&(DeleteEntity(global.phoneProp),global.phoneProp=0,j=!1)}var j,Fe,Ee=a(()=>{v();H();x();global.phoneProp=0;j=!1,Fe=()=>o(void 0,null,function*(){let e=GetConvarInt("NPWD_PROPS",0),t;if(e?t="dolu_npwd_phone":t="prop_amb_phone",G(),j)j&&console.log("prop already created");else{for(RequestModel(t);!HasModelLoaded(t);)yield h(1);let n=PlayerPedId(),[i,l,T]=GetEntityCoords(n,!0);global.phoneProp=CreateObject(GetHashKey(t),i,l,T+.2,!0,!0,!0);let I=GetPedBoneIndex(n,28422);AttachEntityToEntity(global.phoneProp,n,I,0,0,0,0,0,0,!0,!0,!1,!1,2,!0),j=!0;let A;e&&(A=C.getKvpInt("npwd-frame")),SetObjectTextureVariation(global.phoneProp,A||7)}})});var z,ve=a(()=>{Ee();x();z=class{constructor(){this.onCall=!1;this.phoneOpen=!1;this.onCamera=!1}createAnimationInterval(){this.animationInterval=setInterval(()=>o(this,null,function*(){let t=PlayerPedId();this.onCall?this.handleCallAnimation(t):this.phoneOpen&&!this.onCamera&&this.handleOpenAnimation(t)}),250)}setPhoneState(t,n){switch(t){case 0:this.onCall=n;break;case 1:this.phoneOpen=n;break;case 2:this.onCamera=n;break}!this.onCall&&!this.phoneOpen?this.animationInterval&&(clearInterval(this.animationInterval),this.animationInterval=null):this.animationInterval||this.createAnimationInterval()}handleCallAnimation(t){IsPedInAnyVehicle(t,!0)?this.handleOnCallInVehicle(t):this.handleOnCallNormal(t)}handleOpenAnimation(t){IsPedInAnyVehicle(t,!0)?this.handleOpenVehicleAnim(t):this.handleOpenNormalAnim(t)}handleCallEndAnimation(t){IsPedInAnyVehicle(t,!0)?this.handleCallEndVehicleAnim(t):this.handleCallEndNormalAnim(t)}handleCloseAnimation(t){IsPedInAnyVehicle(t,!0)?this.handleCloseVehicleAnim(t):this.handleCloseNormalAnim(t)}openPhone(){return o(this,null,function*(){Fe(),this.onCall||this.handleOpenAnimation(PlayerPedId()),this.setPhoneState(1,!0)})}closePhone(){return o(this,null,function*(){G(),this.setPhoneState(1,!1),this.onCall||this.handleCloseAnimation(PlayerPedId())})}startPhoneCall(){return o(this,null,function*(){this.handleCallAnimation(PlayerPedId()),this.setPhoneState(0,!0)})}endPhoneCall(){return o(this,null,function*(){this.handleCallEndAnimation(PlayerPedId()),this.setPhoneState(0,!1)})}openCamera(){return o(this,null,function*(){this.setPhoneState(2,!0)})}closeCamera(){return o(this,null,function*(){this.setPhoneState(2,!1)})}loadAnimDict(t){return o(this,null,function*(){for(RequestAnimDict(t);!HasAnimDictLoaded(t);)yield h(100)})}handleOpenVehicleAnim(t){return o(this,null,function*(){let n="anim@cellphone@in_car@ps",i="cellphone_text_in";yield this.loadAnimDict(n),IsEntityPlayingAnim(t,n,i,3)||(SetCurrentPedWeapon(t,2725352035,!0),TaskPlayAnim(t,n,i,7,-1,-1,50,0,!1,!1,!1))})}handleOpenNormalAnim(t){return o(this,null,function*(){let n="cellphone@",i="cellphone_text_in";yield this.loadAnimDict(n),IsEntityPlayingAnim(t,n,i,3)||(SetCurrentPedWeapon(t,2725352035,!0),TaskPlayAnim(t,n,i,8,-1,-1,50,0,!1,!1,!1))})}handleCloseVehicleAnim(t){return o(this,null,function*(){let n="anim@cellphone@in_car@ps";StopAnimTask(t,n,"cellphone_text_in",1),StopAnimTask(t,n,"cellphone_call_to_text",1),G()})}handleCloseNormalAnim(t){return o(this,null,function*(){let n="cellphone@",i="cellphone_text_out";StopAnimTask(t,n,"cellphone_text_in",1),yield h(100),yield this.loadAnimDict(n),TaskPlayAnim(t,n,i,7,-1,-1,50,0,!1,!1,!1),yield h(200),StopAnimTask(t,n,i,1),G()})}handleOnCallInVehicle(t){return o(this,null,function*(){let n="anim@cellphone@in_car@ps",i="cellphone_call_listen_base";IsEntityPlayingAnim(t,n,i,3)||(yield this.loadAnimDict(n),TaskPlayAnim(t,n,i,3,3,-1,49,0,!1,!1,!1))})}handleOnCallNormal(t){return o(this,null,function*(){let n="cellphone@",i="cellphone_call_listen_base";IsEntityPlayingAnim(t,n,i,3)||(yield this.loadAnimDict(n),TaskPlayAnim(t,n,i,3,3,-1,49,0,!1,!1,!1))})}handleCallEndVehicleAnim(t){return o(this,null,function*(){let n="anim@cellphone@in_car@ps",i="cellphone_call_to_text";StopAnimTask(t,n,"cellphone_call_listen_base",1),yield this.loadAnimDict(n),TaskPlayAnim(t,n,i,1.3,5,-1,50,0,!1,!1,!1)})}handleCallEndNormalAnim(t){return o(this,null,function*(){let n="cellphone@",i="cellphone_call_to_text";IsEntityPlayingAnim(t,"cellphone@","cellphone_call_listen_base",49)&&(yield this.loadAnimDict(n),TaskPlayAnim(t,n,i,2.5,8,-1,50,0,!1,!1,!1))})}}});var m,U=a(()=>{ve();m=new z});function It(){return o(this,null,function*(){if(!!(yield ue())){if(global.isPhoneOpen)return yield k();yield ce()}})}var Nt,Ge,B,ce,k,ue,J=a(()=>{_();$();se();U();d();global.isPhoneOpen=!1;global.isPhoneDisabled=!1;global.isPlayerLoaded=!1;global.clientPhoneNumber=null;global.phoneProp=null;Nt=global.exports;onNet("npwd:setPlayerLoaded",e=>{global.isPlayerLoaded=e,e||s("PHONE","npwd:unloadCharacter",{})});RegisterKeyMapping(f.general.toggleCommand,"Toggle Phone","keyboard",f.general.toggleKey);setTimeout(()=>{emit("chat:addSuggestion",`/${f.general.toggleCommand}`,"Toggle displaying your cellphone")},1e3);Ge=()=>{let e=GetClockHours(),t=GetClockMinutes();return e<10&&(e=`0${e}`),t<10&&(t=`0${t}`),`${e}:${t}`},B=!1,ce=()=>o(void 0,null,function*(){global.isPhoneOpen=!0,B=!0;let e=Ge();yield m.openPhone(),emitNet("npwd:getCredentials"),SetCursorLocation(.9,.922),s("PHONE","npwd:setVisibility",!0),s("PHONE","npwd:setGameTime",e),SetNuiFocus(!0,!0),SetNuiFocusKeepInput(!0),emit("npwd:disableControlActions",!0)}),k=()=>o(void 0,null,function*(){global.isPhoneOpen=!1,B=!1,s("PHONE","npwd:setVisibility",!1),yield m.closePhone(),SetNuiFocus(!1,!1),SetNuiFocusKeepInput(!1),emit("npwd:disableControlActions",!1)});RegisterCommand(f.general.toggleCommand,()=>o(void 0,null,function*(){!global.isPhoneDisabled&&!IsPauseMenuActive()&&(yield It())}),!1);RegisterCommand("phone:walkModeToggle",()=>{!global.isPhoneOpen||(B?(B=!1,SetNuiFocus(!1,!1),SetNuiFocusKeepInput(!1),emit("npwd:disableControlActions",!1)):(B=!0,SetNuiFocus(!0,!0),SetNuiFocusKeepInput(!0),emit("npwd:disableControlActions",!0)))},!1);RegisterKeyMapping("phone:walkModeToggle","Alternar Foco do Celular (Andar/C\xE2mera)","keyboard","LMENU");RegisterCommand("phone:restart",()=>o(void 0,null,function*(){yield k(),s("PHONE","phoneRestart",{})}),!1);ue=()=>o(void 0,null,function*(){if(!f.PhoneAsItem.enabled)return!0;let e=yield Promise.resolve(Nt[f.PhoneAsItem.exportResource][f.PhoneAsItem.exportFunction]());if(typeof e!="number"&&typeof e!="boolean")throw new Error("You must return either a boolean or number from your export function");return!!e});onNet("npwd:sendCredentials",(e,t,n)=>{global.clientPhoneNumber=e,s("SIMCARD","npwd:setNumber",e),s("PHONE","npwd:sendPlayerSource",t),s("PHONE","npwd:sendPlayerIdentifier",n)});on("onResourceStop",e=>{e===GetCurrentResourceName()&&(s("PHONE","npwd:setVisibility",!1),SetNuiFocus(!1,!1),m.endPhoneCall(),m.closePhone(),ClearPedTasks(PlayerPedId()))});p("npwd:close",(e,t)=>o(void 0,null,function*(){yield k(),t()}));p("npwd:toggleAllControls",(n,i)=>o(void 0,[n,i],function*({keepGameFocus:e},t){global.isPhoneOpen&&SetNuiFocusKeepInput(e),t({})}));f.PhoneAsItem.enabled&&setTimeout(()=>{let e=!1,{exportResource:t,exportFunction:n}=f.PhoneAsItem;emit(`__cfx_export_${t}_${n}`,()=>{e=!0}),e||console.log(`
^1Incorrect PhoneAsItem configuration detected. Export does not exist.^0
`)},100);setInterval(()=>{let e=Ge();s("PHONE","npwd:setGameTime",e)},2e3)});var Ue=a(()=>{});var Be=a(()=>{Ue();_();d();r("npwd:getOrCreateTwitterProfile");r("npwd:deleteTweet");r("npwd:updateTwitterProfile");r("npwd:createTwitterProfile");r("npwd:fetchTweets");r("npwd:createTweet");r("npwd:fetchTweetsFiltered");r("npwd:toggleLike");r("npwd:reportTweet");r("npwd:retweet");onNet("createTweetBroadcast",e=>{K("createTweetBroadcast",e)});onNet("npwd:tweetLikedBroadcast",(e,t,n)=>{K("npwd:tweetLikedBroadcast",{tweetId:e,isAddLike:t,likedByProfileName:n})});onNet("npwd:deleteTweetBroadcast",e=>{K("npwd:deleteTweetBroadcast",e)})});var Te=a(()=>{});var In,ke=a(()=>{Te();d();_();r("npwd-contact-pay");r("npwd-contact-getAll");r("npwd-contact-add");r("npwd:deleteContact");r("npwd:updateContact");r("npwd:localShareContact");In=global.exports;onNet("npwd:contacts:receiveContact",e=>{Y("npwd:addContactExport",e)})});var We=a(()=>{});var Ke=a(()=>{We();d();_();r("npwd:fetchAllListings");r("npwd:addListing");r("npwd:marketplaceDeleteListing");r("npwd:reportListing");onNet("npwd:sendMarketplaceBroadcastAdd",e=>{le("npwd:sendMarketplaceBroadcastAdd",e)});onNet("npwd:sendMarketplaceBroadcastDelete",e=>{le("npwd:sendMarketplaceBroadcastDelete",e)})});var Ae=a(()=>{});var Ve=a(()=>{Ae();d();r("npwd:addNote");r("npwd:fetchAllNotes");r("npwd:updateNote");r("npwd:deleteNote")});var Ye=a(()=>{});var je=ie(X=>{Ye();x();_();$();F();U();d();var q=!1,R=!1,L=!1;function Ot(){SetNuiFocus(!1,!1),s("PHONE","npwd:setVisibility",!1)}function $e(){SetNuiFocus(!0,!0),s("PHONE","npwd:setVisibility",!0)}function Dt(e){return Citizen.invokeNative("0x2491A93618B7D838",e)}var bt=()=>{BeginTextCommandDisplayHelp("THREESTRINGS"),AddTextComponentString("Exit Camera Mode: ~INPUT_CELLPHONE_CANCEL~"),AddTextComponentString("Toggle Front/Back: ~INPUT_PHONE~"),AddTextComponentString("Take Picture: ~INPUT_CELLPHONE_SELECT~"),EndTextCommandDisplayHelp(0,!0,!1,-1)};p("npwd:TakePhoto",(e,t)=>o(X,null,function*(){yield m.openCamera(),emit("npwd:disableControlActions",!1);let n=!1;for(CreateMobilePhone(1),CellCamActivate(!0,!0),Ot(),SetNuiFocus(!1,!1),q=!0,IsHudHidden()?R=!1:(R=!0,DisplayHud(!1)),IsRadarHidden()?L=!1:(L=!0,DisplayRadar(!1)),emit("npwd:PhotoModeStarted");q;){if(yield h(0),IsControlJustPressed(1,27))n=!n,Dt(n);else if(IsControlJustPressed(1,176)){let i=yield Rt();t(i);break}else if(IsControlJustPressed(1,194)){yield Lt();break}bt()}ClearHelp(!0),emit("npwd:PhotoModeEnded"),emit("npwd:disableControlActions",!0),yield m.closeCamera()}));var Rt=()=>o(X,null,function*(){ClearHelp(!0),yield h(0);let e=yield P.emitNetPromise("npwd:UploadPhoto");return DestroyMobilePhone(),CellCamActivate(!1,!1),$e(),m.openPhone(),emit("npwd:disableControlActions",!0),q=!1,R&&(DisplayHud(!0),R=!1),L&&(DisplayRadar(!0),L=!1),e}),Lt=()=>o(X,null,function*(){xe("npwd:cameraExited"),ClearHelp(!0),yield m.closeCamera(),emit("npwd:disableControlActions",!0),DestroyMobilePhone(),CellCamActivate(!1,!1),$e(),q=!1,R&&(DisplayHud(!0),R=!1),L&&(DisplayRadar(!0),L=!1)});r("npwd:FetchPhotos");r("npwd:deletePhoto");r("npwd:saveImage");r("npwd:deleteMultiplePhotos")});var ze=a(()=>{});var Je=a(()=>{ze();_();d();r("npwd:fetchMessageGroups");r("npwd:deleteMessage");r("npwd:fetchMessages");r("npwd:createMessageGroup");r("nwpd:deleteConversation");r("npwd:sendMessage");r("npwd:setReadMessages");r("npwd:getMessageLocation");p("npwd:setWaypoint",({coords:e})=>{SetNewWaypoint(e[0],e[1])});onNet("npwd:sendMessageSuccess",e=>{V("npwd:sendMessageSuccess",e)});onNet("npwd:createMessagesBroadcast",e=>{V("npwd:createMessagesBroadcast",e)});onNet("npwd:createMessageConversationSuccess",e=>{V("npwd:createMessageConversationSuccess",e)})});var qe=a(()=>{d();r("npwd:getWeather")});var Xe=a(()=>{});var Qe=ie(Ze=>{d();Xe();_();r("npwd:mail:fetchMails");r("npwd:mail:deleteMail");r("npwd:mail:setMailRead");onNet("npwd:mail:receiveNew",e=>{s("MAIL","npwd:mail:receiveNew",e),global.exports.npwd.createNotification({notisId:`mail-${Math.random()}`,appId:"MAIL",content:`New email from ${e.sender}`,keepOpen:!1,duration:5e3,path:"/mail"})});p("npwd:mail:updateButton",(e,t)=>o(Ze,null,function*(){try{let n=e.button;if(n){let i=n.buttonEvent,l=n.buttonData||[];n.isServer?emitNet(i,...Array.isArray(l)?l:[l]):emit(i,...Array.isArray(l)?l:[l])}emitNet("npwd:mail:wipeButton",e.id),t({status:"ok"})}catch(n){t({status:"error"})}}))});var Z=a(()=>{});var w,N,Q=a(()=>{w={},N=class{constructor(t,n){this._soundName=t,this._soundSetName=n,w[this._soundName]&&(ReleaseSoundId(w[this._soundName]),delete w[this._soundName]),this._soundId=GetSoundId(),w[this._soundName]=this._soundId}play(){PlaySoundFrontend(this._soundId,this._soundName,this._soundSetName,!1)}stop(){StopSound(this._soundId),ReleaseSoundId(this._soundId),w[this._soundName]&&delete w[this._soundName]}}});var D,ge=a(()=>{D=class{constructor(t){this.ringtoneName=t}play(){PlayPedRingtone(this.ringtoneName,PlayerPedId(),!0)}stop(){StopPedRingtone(PlayerPedId())}static isPlaying(){return IsPedRingtonePlaying(PlayerPedId())}}});var ee,c,u,Ce=a(()=>{J();Z();Q();ge();v();H();ee=global.exports,c=class{constructor(){this.callSoundName="Remote_Ring";this.hangUpSoundName="Hang_Up";this.soundSet="Phone_SoundSet_Default";this.hangUpSoundSet="Phone_SoundSet_Michael";this.currentCall=0}static sendCallAction(t,n){SendNUIMessage({app:"CALL",method:t,data:n})}static sendDialerAction(t,n){SendNUIMessage({app:"DIALER",method:t,data:n})}isInCall(){return this.currentCall!==0}isCurrentCall(t){return this.currentCall===t}getCurrentCall(){return this.currentPendingCall}isInPendingCall(){return!!this.currentPendingCall}isCurrentPendingCall(t){return t===this.currentPendingCall}openCallModal(t){c.sendCallAction("npwd:callModal",t)}handleRejectCall(t){if(this.isInCall()||!this.isCurrentPendingCall(t))return;this.callSound&&this.callSound.stop(),D.isPlaying()&&this.ringtone.stop(),this.currentPendingCall=null,this.openCallModal(!1),c.sendCallAction("npwd:setCaller",null),new N(this.hangUpSoundName,this.hangUpSoundSet).play()}handleStartCall(t,n,i,l,T){return o(this,null,function*(){if(this.isInCall()||!(yield ue())||this.currentPendingCall)return emitNet("npwd:rejectCall",{transmitterNumber:t},1);if(this.currentPendingCall=n,this.openCallModal(!0),i&&(this.callSound=new N(this.callSoundName,this.soundSet),this.callSound.play()),!i){let I=C.getKvpString("npwd-ringtone");this.ringtone=new D(I),this.ringtone.play()}c.sendCallAction("npwd:setCaller",{active:!0,transmitter:t,receiver:n,isTransmitter:i,accepted:!1,isUnavailable:l,isAnonymous:T})})}handleCallAccepted(t){this.currentCall=t.channelId,this.callSound&&this.callSound.stop(),D.isPlaying()&&this.ringtone.stop(),ee["pma-voice"].setCallChannel(t.channelId),c.sendCallAction("npwd:setCaller",t)}handleEndCall(){this.callSound&&this.callSound.stop(),this.currentCall=0,ee["pma-voice"].setCallChannel(0),this.currentPendingCall=null,this.openCallModal(!1),c.sendCallAction("npwd:setCaller",null),new N(this.hangUpSoundName,this.hangUpSoundSet).play()}handleMute(t,n){t?ee["pma-voice"].setCallChannel(0):ee["pma-voice"].setCallChannel(n.channelId)}handleSendAlert(t){SendNUIMessage({app:"DIALER",method:"npwd:callSetAlert",data:t})}},u=new c});var _e,Se,tt=a(()=>{_e=(e,t)=>onNet(e,t),Se=(e,t,n)=>{if(n)return emitNet(e,n,t);emitNet(e,t)}});var fe,Ne=a(()=>{Z();Ce();U();tt();d();F();fe=(e,t)=>o(void 0,null,function*(){if(!u.isInCall())try{let n=yield P.emitNetPromise("npwd:beginCall",e);if(m.startPhoneCall(),n.status!=="ok")return t==null?void 0:t(n);let{transmitter:i,isTransmitter:l,receiver:T,isUnavailable:I,isAnonymous:A}=n.data;u.handleStartCall(i,T,l,I,A),t==null||t(n)}catch(n){console.error(n),t==null||t({status:"error",errorMsg:"CLIENT_TIMED_OUT"})}});p("npwd:beginCall",fe);_e("npwd:startCall",e=>o(void 0,null,function*(){let{transmitter:t,isTransmitter:n,receiver:i,isUnavailable:l,isAnonymous:T}=e;u.handleStartCall(t,i,n,l,T)}));p("npwd:acceptCall",(e,t)=>{m.startPhoneCall(),Se("npwd:acceptCall",e),t({})});_e("npwd:callAccepted",e=>{u.handleCallAccepted(e)});p("npwd:rejectCall",(e,t)=>{Se("npwd:rejectCall",e),t({})});onNet("npwd:callRejected",e=>o(void 0,null,function*(){u.handleRejectCall(e.receiver),m.endPhoneCall(),c.sendDialerAction("npwd:callRejected",e)}));p("npwd:endCall",(e,t)=>o(void 0,null,function*(){try{let n=yield P.emitNetPromise("npwd:endCall",e);if(n.status==="error")return console.error(n.errorMsg);t({})}catch(n){console.error(n),t({status:"error",errorMsg:"CLIENT_TIMED_OUT"})}m.endPhoneCall()}));onNet("npwd:callEnded",(e,t)=>{u.isInCall()&&!u.isCurrentCall(e)||(u.handleEndCall(),m.endPhoneCall(),t&&c.sendDialerAction("npwd:callRejected",t))});r("npwd:fetchCalls");onNet("npwd:callSetAlert",e=>{u.handleSendAlert(e)});p("npwd:toggleMuteCall",(e,t)=>{let{state:n,call:i}=e;u.handleMute(n,i),t({})})});var nt=a(()=>{});var rt=a(()=>{nt();_();d();r("phone:getMatchProfiles");r("phone:getMyProfile");r("phone:getMatches");r("phone:saveLikes");r("phone:createMyProfile");r("phone:updateMyProfile");onNet("phone:saveLikesBroadcast",e=>{pe("phone:saveLikesBroadcast",e)});onNet("phone:matchAccountBroadcast",e=>{pe("phone:matchAccountBroadcast",e)})});var it=a(()=>{});var ot=a(()=>{d();it();_();r("npwd:darkchatFetchChannels");r("npwd:darkchatFetchMessages");r("npwd:darkchatAddChannel");r("npwd:darkchatSendMessage");r("npwd:darkchatLeaveChannel");r("npwd:darkchatUpdateChannelLabel");r("npwd:darkchatFetchMembers");r("npwd:darkchatTransferOwnership");r("npwd:darkchatDeleteChannel");onNet("npwd:darkchatBroadcastMessage",e=>{s("DARKCHAT","npwd:darkchatBroadcastMessage",e)});onNet("npwd:darkchatBroadcastLabelUpdate",e=>{s("DARKCHAT","npwd:darkchatBroadcastLabelUpdate",e)});onNet("npwd:darkchatTransferOwnershipSuccess",e=>{s("DARKCHAT","npwd:darkchatTransferOwnershipSuccess",e)});onNet("npwd:darkchatDeleteChannelSuccess",e=>{s("DARKCHAT","npwd:darkchatDeleteChannelSuccess",e)})});var at=a(()=>{});var st=a(()=>{d();at();r("npwd:audio:uploadAudio")});var lt=a(()=>{});var pt=a(()=>{});var b,Ie=a(()=>{d();pt();H();v();Q();b=new Map;p("npwd:playAlert",()=>{let e=C.getKvpString("npwd-notification");new N("Text_Arrive_Tone",e).play()});p("npwd:onNotificationConfirm",(e,t)=>{let n=b.get(`${e}:confirm`);if(!n)return console.log(`NPWD could not find any function ref for notification: ${e}`);n(),b.delete(`${e}:confirm`),t({})});p("npwd:onNotificationCancel",(e,t)=>{let n=b.get(`${e}:cancel`);if(!n)return console.log(`NPWD could not find any function ref for notification: ${e}`);n(),b.delete(`${e}:cancel`),t({})})});var dt=ie(te=>{_();$();d();Ne();Te();Ae();J();F();Ce();U();Z();lt();Ie();var E=global.exports;E("openApp",e=>{g("openApp",e,["string"]),s("PHONE","npwd:openApp",e)});E("setPhoneVisible",e=>o(te,null,function*(){g("setPhoneVisible",e,["boolean","number"]);let t=global.isPhoneDisabled,n=global.isPhoneOpen;if(t&&!e&&n)return;!!e?yield ce():yield k()}));E("isPhoneVisible",()=>global.isPhoneOpen);E("setPhoneDisabled",e=>{g("setPhoneVisible",e,["boolean","number"]);let t=!!e;global.isPhoneDisabled=t,Me("npwd:isPhoneDisabled",e)});E("isPhoneDisabled",()=>global.isPhoneDisabled);E("startPhoneCall",(e,t=!1)=>{g("startPhoneCall",e,["string"]),fe({receiverNumber:e,isAnonymous:t})});E("fillNewContact",e=>{g("fillNewContact",e,["object"]),Y("npwd:addContactExport",e)});E("fillNewNote",e=>{g("fillNewNote",e,["object"]),ye("npwd:addNoteExport",e)});E("getPhoneNumber",()=>o(te,null,function*(){if(!global.clientPhoneNumber){let e=yield P.emitNetPromise("npwd:getPhoneNumber");global.clientPhoneNumber=e.data}return global.clientPhoneNumber}));E("isInCall",()=>u.isInCall());E("endCall",()=>o(te,null,function*(){u.isInCall()&&(c.sendCallAction("npwd:endCall",null),m.endPhoneCall())}));E("sendUIMessage",e=>{console.log("sendUIMessage is deprecated, use sendNPWDMessage instead"),SendNUIMessage(e)});E("sendNPWDMessage",(e,t,n)=>{s(e,t,n)});E("createNotification",e=>{g("createSystemNotification",e,["object"]),g("createSystemNotification",e.notisId,["string"]),s("PHONE","npwd:createNotification",e)});E("createSystemNotification",e=>{g("createSystemNotification",e,["object"]),g("createSystemNotification",e.uniqId,["string"]);let t=(e==null?void 0:e.onConfirm)||(e==null?void 0:e.onCancel);if(e.controls&&!e.keepOpen)return console.log("Notification must be set to keeOpen in order to use notifcation actions");if(!e.controls&&t)return console.log("Controls must be set to true in order to use notifcation actions");e.controls&&(b.set(`${e.uniqId}:confirm`,e.onConfirm),b.set(`${e.uniqId}:cancel`,e.onCancel)),s("SYSTEM","npwd:createSystemNotification",e)});E("removeSystemNotification",e=>{g("createSystemNotification",e,["string"]),s("SYSTEM","npwd:removeSystemNotification",{uniqId:e})})});var mt,Et=a(()=>{d();v();H();Q();ge();mt=Object.freeze({gold:3,default:7,minimal:7,blue:0,pink:6,white:4});p("npwd:nuiSettingsUpdated",(e,t)=>{global.exports["pma-voice"].setCallVolume(e.callVolume),C.setKvp("npwd-ringtone",e.ringtone.value),C.setKvp("npwd-notification",e.notiSound.value);let n=e.frame.value,i=n.substr(0,n.lastIndexOf("."));C.setKvpInt("npwd-frame",mt[i]),SetObjectTextureVariation(global.phoneProp,mt[i]),t({})});p("npwd:previewAlert",()=>{let e=C.getKvpString("npwd-notification");new N("Text_Arrive_Tone",e).play()});p("npwd:previewRingtone",()=>{if(D.isPlaying())return;let e=C.getKvpString("npwd-ringtone"),t=new D(e);t.play(),setTimeout(t.stop,3e3)})});var Ki,$i,Zi,P,F=a(()=>{d();se();J();Be();ke();Ke();Ve();Ki=oe(je());Je();qe();$i=oe(Qe());Ne();rt();ot();st();Ee();Zi=oe(dt());Et();Ie();P=new M});F();})();
